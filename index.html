<!DOCTYPE html>

<html>

<head>

	<title>Boston Transportation Map</title>

	<meta name="viewport"
	content="width=device-width, initial-scale=1.0">

	<meta charset="utf-8">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<link rel="stylesheet"
	href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
	<script src ="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"> </script>

	<script src='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v3.3.1/mapbox.css' rel='stylesheet' />

<!-- I removed the 3 lines of src= for the data files here since we are using jquery -->

	<style>

		#map {
			position: absolute;
			top: 0;
			bottom:0;
			width:100%;
			height:100%;
		}
	
	</style>

</head>

	<body>

		<div id='map'></div>

		<script>

			var map=L.map('map',{
				center:[42.35, -71.15229363080779],
				zoom:11
				});

			L.mapbox.accessToken = 'pk.eyJ1IjoiY2xhaXJlLWNnIiwiYSI6ImNrbnA3bjZxdTAwOHQyb3FwdXhhbDM5d3cifQ.cX3_pLwyHaV0y3N6_X6yaw';

			var mapboxTiles = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token=' + L.mapbox.accessToken, {
		         attribution: '© <a href="https://www.mapbox.com/feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
				maxZoom: 22,
				});

			map.addLayer(mapboxTiles);

			// added this variable to set point data style as circle-marker
			var geojsonMarkerOptions = {
			    radius: 8,
			    fillColor: "#00ccff",
			    color: "#006680",
			    weight: 1,
			    opacity: 1,
			    fillOpacity: 0.8
			};


			// In original I deleted 2 extra spaces that were here around "function"
			// this version shows styling of lines and polygons
			// this version has point data rendered as circle marker for styling
			// this version has a popup on the point data



			$.getJSON("data/busRoutes.geojson",function(data){
				L.geoJson(data, {color: "purple", weight: 2}).addTo(map);
			});

			$.getJSON("data/highwaySubDistricts.geojson",function(data){
				L.geoJson(data,{color: "orange", fillColor: "yellow", weight: 4}).addTo(map);
			});

			$.getJSON("data/busStops.geojson",function(data){
				L.geoJson(data, {
			    pointToLayer: function (feature, latlng) {
			        return L.circleMarker(latlng, geojsonMarkerOptions);
			    },
			    onEachFeature: function (feature, layer) {
			        layer.bindPopup(feature.properties.STOP_NAME);
			    }
			}).addTo(map);
			});



		</script>

	</body>

</html>